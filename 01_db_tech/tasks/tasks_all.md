##                             Лабораторная работа 1. Подготовка окружения для создания консольного PHP-приложения, работающего с SQLite
### Установка SQLite
* Установить на своем компьютере СУБД SQLite. Выяснить, какие файлы необходимы для работы этой СУБД, поработать в интерактивном режиме с помощью стандартного консольного клиента sqlite3. 

### Создание shell-скрипта, работающего с SQLite
* Написать командный файл self-logger.bat (Windows) или self-logger.sh (Mac/Linux), который будет сохранять в БД SQLite статистику о своих запусках (имя пользователя, дата и время запуска) и выводить эту информацию на экран:
```
Имя программы: self-logger.bat
Количество запусков: 10
Первый запуск: 2021.09.04 16:54
---------------------------------------------
User      | Date
--------------------------------------------
andrey    | 2021.09.03 16:52
--------------------------------------------
...
```
При первом запуске программа должна автоматически создать БД нужной структуры.

### Установка PHP
* Настроить работу с PHP в CLI-режиме (без веб-сервера).

### Настройка GitHub и Git
* Зарегистрироваться на GitHub. Сделать форк своего репозитория  из https://github.com/andpop-mrsu.
* Установить и выполнить первичную настройку Git на локальной машине (`git configure --global user.name`, `git configure --global user.email`).
* Склонировать "форкнутый" репозиторий из своего профиля GitHub на локальную машину (`git clone`). При этом удаленный репозиторий в вашем профиле будет привязан под именем *origin*.
* Добавить привязку к оригинальному репозиторию под именем *upstream* (`git remote add upstream https://github.com/andpop-mrsu/402_XXX_XX.git`).
* Создать в локальном репозитории ветку Task01. Далее работать в этой ветке.

### Начало первого проекта
* Создать каталог Task01.
* Добавить файл README.md (формат Markdown) с описанием своего проекта.
* Написать PHP-скрипт task1.php, выводящий на экран инструкцию к игре, которую вы будете разрабатывать (описание игры для вашего варианта в файле specification_01_nn.md).

### Отправка задания на проверку
* Добавить файл README_logger.md с инструкцией по запуску командного файла self-logger.bat или self-logger.sh.
* Выполнить коммит в ветке Task01 (в папке Task01 должны быть файлы: README.md, README_logger.md, self-logger.bat/self-logger.sh и task1.php).
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task01 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).


* * *
### Темы для изучения
* PHP в режиме командной строки.
    * Д. Скляр, А. Трахтенберг "PHP. Рецепты программирования", 3-е изд., глава 26. СПб.: Питер, 2015.
* Система управления версиями Git.
    * <https://git-scm.com/book/ru/v2/> S.Chacon, B. Straub "Pro Git". Электронная книга про Git (перевод на русский язык).
    * <https://learn.javascript.ru/screencast/git> Скринкаст Ильи Кантора по Git.
* Веб-сервис GitHub для хостинга IT-проектов и их совместной разработки
    * <https://youtu.be/pUT3mx1ZRUМ> "Pull request в опенсорс" от Hexlet. Инструкция по работе с Pull Request для добавления своего кода в open-source проекты (наша процедура отчетности организована точно по такой же схеме).   
* Встраиваемая СУБД SQLite.
    * <https://www.sqlite.org/docs.html> Документация на официальном сайте SQLite.
    * J.A. Kreibich "Using SQLite". Издательство O'Reilly, 2010 год.
    * G. Allen, M. Owens "The Definitive Guide to SQLite", second edition. Издательство Apres, 2010 год.
* Язык разметки Markdown.
    * <https://guides.hexlet.io/markdown/> Описание основных возможностей.
    * <https://guides.github.com/pdfs/markdown-cheatsheet-online.pdf> Шпаргалка (cheatsheet).


##                             Лабораторная работа 2. Создание и настройка Composer-проекта

### Создание новой ветки в локальном Git-репозитории
* Создать в локальном репозитории ветку Task02. Далее работать в этой ветке в каталоге Task02.

### Установка пакетного менеджера Composer
* Установить на своем компьютере Composer. Установка должна быть глобальной, чтобы утилита была доступнa из любого каталога по команде `composer`.

### Создание Composer-проекта (пакета)
* Создать каталог для своего проекта с именем разрабатываемой игры (Task02/tic-tac-toe, Task02/guess-number, Task02/hangman, Task02/cold-hot, Task02/minisweeper).
    * Исходный код должен храниться в подкаталоге src.
    * Запускной PHP-файл для игры должен находиться в подкаталоге bin.
* Инициализировать проект с помощью Composer (команда `composer init`).
* С помощью `composer require` установить и подключить в зависимости проекта библиотеку wp-cli/php-cli-tools, упрощающую разработку консольных программ (можно использовать функции `line()` и `prompt()` для вывода/ввода строк). Изучить документацию к этой библиотеке на GitHub.
* Создать в папке bin исполняемый (запускной) PHP-скрипт с именем из спецификации к игре (tic-tac-toe, guess-number, hangman, cold-hot, minisweeper). В этом файле должны автоматически загружаться все нужные файлы проекта и вызываться функция `startGame()` для запуска игры.
* Создать модули src/Controller.php и src/View.php, назначить пространства имен *GitHub_login\Game_name*\Controller и *GitHub_login\Game_name*\View. Обратите внимание, что в названиях пространств имен не должно быть знаков тире.
* Добавить в модуль Controller функцию `startGame()` для инициализации игры и вывода начального экрана игры (сам экран должен выводиться функцией из модуля View).

### Настройка исполняемых файлов проекта
* Добавить в composer.json параметр "bin", в качестве значения указать массив с именами файлов, которые Composer при установке пакета из Packagist сделает исполняемыми. Пока в этом массиве должен быть один запускной скрипт игры.
* Для того, чтобы исполняемый файл получился кроссплатформенным, в первую строку запускного скрипта нужно добавить шебанг `#!/usr/bin/env php`.

### Настройка автозагрузки файлов проекта
* Добавить в composer.json параметр "autoload" с вложенным параметром "files". В качестве значения "files" указать массив с именами файлов для автозагрузки. Пока в этом массиве должен быть файлы с модулями Controller и View.
* Выполнить команду `composer dump-autoload -o` для генерации в файле vendor/autoload.php кода автозагрузки всех нужных файлов.
* В запускном скрипте:
    * добавить код для загрузки файлов из vendor/autoload.php;
    * импортировать функцию `startGame()` из пространства имён *GitHub_login\Game_name*\Controller;
    * вызвать функцию `startGame()`.


### Настройка Git
* В репозитории не должно быть временных файлов и каталогов, а также файлов внешних зависимостей (каталог vendor), подключенных в проекте. Все лишние файлы и каталоги нужно указать в файле .gitignore, чтобы Git их игнорировал.

### Доработка документации проекта
* В файле README.md кроме описания игры должно быть описано окружение, необходимое для запуска проекта (PHP с указанием минимальной версии и нужных настроек в php.ini, Composer и т.д.), а также команды, которые требуется выполнить для подготовки и запуска проекта после его загрузки из GitHub или после установки в качестве пакета с сайта Packagist.

### Публикация пакета на Packagist
* Создать в своем профиле на GitHub отдельный репозиторий для игры.
* Скопировать туда созданный проект.
* Зарегистрироваться на Packagist.
* Создать новый пакет на Packagist, связав его с созданным репозиторием на GitHub.
* Установить опубликованный пакет локально и глобально, проверить запуск игры из командной строки (без указания интерпретатора). Разобраться с механизмом подобного запуска.
* Добавить ссылку на опубликованный пакет в файл README.md.

### Отправка задания на проверку
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task02 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).


* * *
### Темы для изучения
* Работа с пакетами для приложений на языке PHP. Пакетный менеджер Composer и основной репозиторий пакетов Packagist.org.
    * Д. Локхарт "Современный PHP. Новые возможности и передовой опыт", глава 4. М.: ДМК Пресс, 2016.
    * Д. Скляр, А. Трахтенберг "PHP. Рецепты программирования", 3-е изд., глава 27. СПб.: Питер, 2015.
    * <https://books.goalkicker.com/PHPBook/> Электронная книга "PHP Notes for Professionals", глава 41.
* Пространства имен и файловая структура PHP-приложений.
    * Д.В. Котеров, И.В. Симдянов "PHP 7 в подлиннике", глава 25. СПб.: БХВ-Петербург, 2016.
* Автозагрузка модулей и импорт функций в PHP-приложениях.
    * Д. Локхарт "Современный PHP. Новые возможности и передовой опыт" М.: ДМК Пресс, 2016.
* Типы исполняемых файлов в операционных системах.
* Разделение интерпретируемого приложения на исполняемые скрипты и подключаемые модули.
    * <https://ru.hexlet.io/blog/posts/skripty-moduli-i-biblioteki> К. Мокевнин "Скрипты, модули и библиотеки"

* * *
### Полезные ссылки
* Пример консольного PHP-приложения, оформленного в виде пакета и опубликованного на Packagist.org.
    * <https://github.com/andpop/php-project-lvl1> Репозиторий на GitHub
    * <https://packagist.org/packages/andpop/php-project-1> Пакет на Packagist


##            Лабораторная работа 3. Реализация консольного варианта игры без работы с базой данных

### Создание новой ветки в локальном Git-репозитории
* Создать в локальном репозитории ветку Task03. Далее работать в этой ветке в каталоге Task03.

### Реализация игры без работы с базой данных
На базе созданного с помощью Composer проекта (лабораторная работа 2) написать программу для реализации консольного варианта игры из спецификации для вашего варианта. С базой данных пока работать не нужно.
В программе должны поддерживаться все параметры командной строки, описанные в спецификации к задаче. Если режим предусматривает работу с базой данной, то должно выводиться сообщение о том, что в игра пока не сохраняется в базе.
Архитектуру проекта продумать с учетом того, что проект в дальнейшем придется перенести на другую платформу исполнения и переписать на другом языке программирования.

Требования к PHP-коду:
* Создание проекта и подключение внешних зависимостей (как минимум, wp-cli/php-cli-tools) с помощью Composer.
* Использование пространств имен для всех файлов в проекте.
* Применение автозагрузки файлов в проект.
* Поддержка стандартной файловой структуры проекта.
* Разделение логики и данных от визуального представления (паттерн MV-).
* Соблюдение стандартов кодирования PSR-1, PSR-12 (будет проверяться автоматически с помощью PHP Code Sniffer).
* В модулях не должно быть исполняющегося кода. Запуск на выполнение функций может быть только в исполняющемся файле (скрипте).
* Написание самодокументируемого кода
    * Осмысленное именование сущностей (на английском языке)
    * Разбиение на подпрограммы (декомпозиция), чтобы каждую можно было охватить одним взглядом и понять, как она устроена.
    * Каждая подпрограмма должна решать ровно одну задачу и быть обособленной от других.

### Доработка документации проекта
* В файле README.md должен быть описан игровой процесс (в каком формате нужно вводить координаты ячеек игрового поля, какие параметры должны быть введены перед началом партии и т.п.).

### Публикация игры на Packagist
* Скопировать проект с игрой в отдельный репозиторий GitHub, который вы должны были создать при выполнении второй лабораторной работы. Добавить в этот репозиторий тег с номером версии.
* Обновить связанный с этим репозиторием пакет на Packagist.
* Установить опубликованный пакет локально и глобально, проверить запуск игры из командной строки (без указания интерпретатора). Разобраться с механизмом подобного запуска.
* Добавить ссылку на опубликованный пакет и инструкцию по его установке в файл README.md.


### Отправка задания на проверку
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task03 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).


* * *
### Полезные ссылки
* Стандарты PSR для PHP: https://www.php-fig.org/
* Автоматическая проверка соответствия оформления стандарту - PHP Code Sniffer (https://github.com/squizlabs/PHP_CodeSniffer)
* Автоматическое форматирование - PHP Coding Standard Fixer (https://github.com/FriendsOfPHP/PHP-CS-Fixer)
* Руководство по чистому коду в PHP на русском языке: https://github.com/peter-gribanov/clean-code-php



##                             Лабораторная работа 4. Подключение к приложению базы данных SQLite

### Создание новой ветки в локальном Git-репозитории
* Создать в локальном репозитории ветку Task04. Далее работать в этой ветке в каталоге Task04.

### Добавление к игре функционала для работы с базой данных
* Реализовать в игре возможности по работе с базой данных SQLite, описанные в спецификации (файл specification_01_nn.md).
* Код для получения, изменения и сохранения данных должен быть отделён от кода для визуализации данных.

### Доработка документации проекта
* В файле README.md должны быть описаны возможности, связанные с сохранением в базе данных хода партий и их дальнейшим воспроизведением.

### Обновление игры на Packagist
* Обновить пакет с игрой на Packagist.

### Отправка задания на проверку
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task04 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).



##                             Лабораторная работа 5. Работа с базой данных с помощью ORM

### Создание новой ветки в локальном Git-репозитории
* Создать в локальном репозитории ветку Task05. Далее работать в этой ветке в каталоге Task05. Других каталогов в этой ветке быть не должно.
* Скопировать в Task05 проект, разработанный в л/р 4.

### Перевод функционала по работе работы с базой данных на ORM (Object-Relational Mapping)
* Подключить к своему проекту с игрой ORM-библиотеку RedBeanPHP.
* Изменить код для работы с базой данных, вместо SQL-запросов перейти на функции RedBeanPHP.

### Обновление игры на Packagist
* Обновить пакет с игрой на Packagist.

### Отправка задания на проверку
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task05 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).


* * *
### Полезные ссылки
* Видеолекция "Программный доступ к базе данных" (МГУ им. Н.П. Огарева, май 2020 года). <https://youtu.be/V_DQUTZ4h7A?list=PLicf0S1Y1CXspWUDelS8TSWsgEX5qX2xdI>.


##                             Лабораторная работа 6. Реализация игры в виде JavaScript-приложения

В лабораторных работах 3-5 вы написали на языке PHP игру, в которую можно играть в консоли, а ход партий и их результаты сохраняются в базе данных SQLite.

Теперь в двух следующих лабораторных работах необходимо реализовать ту же самую игру на другой платформе, в другой среде исполнения - играть нужно будет в веб-браузере, а информацию сохранять в локальной NoSQL базе данных IndexedDB. Таким образом, логика и структура модулей остаются прежними, а пользовательский интерфейс и механизм работы с данными полностью меняются.

### Просмотр видеолекции
* Видеолекция для данного задания "Консольные и браузерные приложения. Особенности JavaScript" (МГУ им. Н.П. Огарева, октябрь 2020 года). https://youtu.be/OOJqloRtyq0
**Посмотреть обязательно!**

### Создание новой ветки в локальном Git-репозитории
* Создать в локальном репозитории ветку Task06. Далее работать в этой ветке в каталоге Task06.

### Перенос консольной PHP-игры в другую среду исполнения
* Браузер поддерживает только язык JavaScript, поэтому исходный код игры нужно переписать на JavaScript (с использованием возможностей ES6), сохраняя имеющуюся логику и модульность.
* Вместо ввода данных с клавиатуры и вывода строк текста нужно с помощью HTML и CSS сделать полноценный графический интерфейс.

### Изменение документации проекта
* Инструкции в файле README.md нужно привести в соответствие с новым интерфейсом и игровым процессом.

### Публикация игры в качестве веб-сайта
* С помощью сервиса GitHub Pages можно использовать GitHub для бесплатного хостинга статических сайтов (HTML, CSS, JavaScript), не имеющих серверной части. Вам нужно будет создать на GitHub отдельный репозиторий для веб-версии игры и опубликовать его в качестве сайта GitHub Pages. Ссылку на этот сайт нужно добавить в README.md, работа игры будет проверяться по этой ссылке.

### Отправка задания на проверку
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task06 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).



## Лабораторная работа 7. Подключение к браузерному приложению базы данных IndexedDB

### Просмотр видеолекции
* Видеолекция для данного задания "Обработка событий в JavaScript.База данных IndexedDB" (МГУ им. Н.П. Огарева, ноябрь 2020 года). https://youtu.be/AwmB5CzdAIc
**Посмотреть обязательно!**

### Создание новой ветки в локальном Git-репозитории
* Создать в локальном репозитории ветку Task07. Далее работать в этой ветке в каталоге Task07.

### Добавление к игре функционала для работы с базой данных
* Реализовать в игре возможности по работе с базой данных IndexedDB, описанные в спецификации (файл specification_01_nn.md).
* Для работы с IndexedDB можно пользоваться библиотекой idb.
* На странице с игрой должны быть ссылки, по которым можно либо начать новую партию, либо выполнить нужную операцию с базой данных (вывести список всех сыгранных партий, воспроизвести игру с определённым идентификатором и т.п. - согласно спецификации к игре).
* Код для получения, изменения и сохранения данных должен быть отделён от кода для визуализации данных.

### Доработка документации проекта
* В файле README.md должны быть описаны возможности, связанные с сохранением в базе данных хода партий и их дальнейшим воспроизведением.

### Обновление игры на сайте GitHub Pages
* Обновить отдельный репозиторий для веб-версии игры, который был опубликован в качестве сайта GitHub Pages в предыдущей работе. Ссылка на этот сайт должна присутствовать в README.md, функционал игры будет проверяться по этой ссылке.


### Отправка задания на проверку
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task07 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).


##                             Лабораторная работа 8. Преобразование браузерного приложения в SPA с серверной базой данных

На основе браузерного приложения, работающего с базой данных IndexedDB (л/р 7), написать простое Single Page Application, которое с помощью REST API взаимодействует с базой данных SQLite на сервере.
Backend приложения реализовать в соответствии с паттерном Front Controller с помощью либо встроенных механизмов PHP (80% от максимального балла за задание), либо PHP-микрофреймворка Slim (максимальный балл за задание).

Frontend будет обмениваться с сервером данными в JSON-формате посредством HTTP-запросов. Маршруты запросов должны соответствовать REST API:
|Метод|Путь|Описание|
|-----|----|--------|
|GET|games|Сервер отдает JSON с данными о всех играх, сохраненных в БД|
|GET|games/{id}|Сервер отдает JSON с данными о ходах игры с идентификатором id|
|POST|games|Сервер принимает JSON с данными о новой начатой игре и записывает их в БД. При этом возвращается идентификатор игры|
|POST|step/{id}|Сервер принимает JSON с данными об очередном ходе в игре с идентификатором id и записывает их в БД|

### Просмотр видеолекций
* Видеолекции для данного задания: "Frontend и backend. Веб-приложения на PHP" https://youtu.be/nngT3DShFF4,"Веб-приложения на PHP. Часть 2" https://youtu.be/z3lmJndVIho (МГУ им. Н.П. Огарева, апрель 2021 года)
**Посмотреть обязательно!**

### Создание новой ветки в локальном Git-репозитории. Файловая структура
* Создать в локальном репозитории ветку Task08. Далее работать в этой ветке в каталоге Task08.
* Создать каталог Task08/public. Это будет корень нашего сайта, в нем размещаются только те файлы, которые можно открыть напрямую из браузера.

### Запуск веб-сервера
* Будем использовать локальный веб-сервер, встроенный в PHP. Запускать сервер будем на порту 3000.
* Находясь в каталоге Task08, запустить сервер с указанием подкаталога public в качестве корня сайта: `php -S localhost:3000 -t public`.

### Размещение frontend-части приложения
* Нужные для работы сайта файлы index.html, *.css, *.js, созданные в л/р 7, скопировать в Task08/public.
* Проверить работу приложения, открыв в браузере страницу http://localhost:3000/index.html или просто http://localhost:3000/.

### Размещение базы данных
* Базу данных SQLite разместить в каталоге Task08/db.

### Создание backend-части приложения с помощью микрофреймворка Slim
* В каталоге Task08 устанавливаем через Composer минимально необходимые пакеты для Slim:
```
composer require slim/slim slim/psr7 slim/http
``` 
В результате должны создаться файлы Task08/composer.json, Task08/composer.lock и каталог Task08/vendor.
* Создаем точку входа Task08/public/index.php. Больше никаких PHP-файлов в Task08/public быть не должно.
* Задаем в index.php маршруты запросов и их обработчики. Пример:
```PHP
<?php

require __DIR__ . '/../vendor/autoload.php';

use Slim\Factory\AppFactory;

$app = AppFactory::create();
$app->addErrorMiddleware(true, true, true);

$app->get('/', function ($request, $response) {
    $response->write('Здесь должен открыться index.html');
    return $response;
});


$app->get('/games', function ($request, $response) {
    $response->write('Здесь должен вернуться JSON с данными о всех играх');
    return $response;
});

$app->post('/games', function ($request, $response) {
    $response->write('Здесь должен приняться JSON с данными о новой игре и записаться в БД');
    return $response;
});

$app->run();

```
* В данной работе можно весь код разместить в одном файле index.php. Если же потребуется вынести код в отдельные файлы, то они должны размещаться в каталоге Task08/src и автоматически загружаться в index.php.
* Приложение должно запускаться в браузере по адресам http://localhost:3000/index.html или просто http://localhost:3000, поэтому при получении GET-запроста на корневой адрес /, должна сработать переадресация на /index.html.

### Доработка документации проекта
* В файле README.md должен быть описан процесс запуска приложения.

### Отправка задания на проверку
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task08 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).
