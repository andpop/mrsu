# Технологии создания приложений баз данных
Мордовский госуниверситет, факультет математики и информатики, ФИиИТ, 7 семестр

## Вводные и промежуточные лекции по инструментарию
### 1. Работа с командной строкой и Git в Windows
Видео: https://youtu.be/UM6jaYa1YY8
* Запуск стандартной командной строки  
* Командная строка как интерфейс для общения человека с компьютером  
* Запуск приложений из командной строки  
* Поиск подходящего файла для выполнения  
* Переменные среды  
* Пути для поиска в переменной PATH  
* Исполняемые файлы. Переменная PATHEXT  
* Внутренние команды, не имеющие исполняемого файла  
* Оболочка (командный интерпретатор)  
* Командная строка = Консоль + Оболочка  
* Оболочка cmd.exe и консоль conhost.exe  
* Какие команды знает оболочка cmd.exe?  
* Интерактивный и пакетный режимы работы оболочки  
* Оболочка Windows PowerShell  
* Windows Terminal  
* Linux внутри Windows (WSL). Оболочка bash  
* Преимущества командного интерфейса, повторяемость действий  
* Консольные файловые менеджеры. FAR Manager  
* Git как стороннее приложение  
* Варианты установки Git  
* Добавление пути в переменную PATH  
* Оболочка Git Bash  
* Работа с Git в cmd.exe и PowerShell  
* Автодополнение команд Git в Git Bash  
* Создание нового Git-репозитория  
* Конфигурационный файл репозитория  
* Выполнение коммита  
* Просмотр истории коммитов  
* Создание новой ветки  
* Выводы

### 2. Особенности PHP
Видео: https://youtu.be/4HWzfnudxrs

На лекции дан обзор некоторых возможностей и особенностей языка PHP:
- Запуск программ в консольном режиме. Пакетный и интерактивный режимы работы.
- Алгоритмические возможности, стандартные функции и расширения.
- Особенности работы с переменными и функциями.
- Разделение программы на модули. Подключение файлов, автозагрузка с помощью Composer.
- Требования к оформлению кода. Стандарты PSR

Полезные ссылки:
* Стандарты PSR для PHP: https://www.php-fig.org/
* Автоматическая проверка соответствия оформления стандарту - PHP Code Sniffer (https://github.com/squizlabs/PHP_CodeSniffer)
* Автоматическое форматирование - PHP Coding Standard Fixer (https://github.com/FriendsOfPHP/PHP-CS-Fixer)
* Руководство по чистому коду в PHP на русском языке: https://github.com/peter-gribanov/clean-code-php

Темы:
* Начало
* Цель первых лабораторных работ - создать консольное приложение на языке PHP, работающее с БД SQLite
* Настройка окружения для выполнения лабораторных работ
* Распространение PHP-кода с помощью пакетного менеджера Composer и репозитория Packagist
* Сложность предварительных работ по настройке окружения
* PHP как императивный процедурный язык
* Специфика языка PHP
* Запуск простейшей программы на PHP
* Интерактивный режим работы с PHP (php -a)
* Реализация в PHP основных алгоритмических возможностей
* Переменные в PHP. PHP как динамический язык
* Слабая типизация в PHP
* Зависимость переменных от регистра имени
* Подпрограммы (функции) в PHP
* Независимость функций от регистра имени
* Вызов функции до ее определения
* Type hinting
* Вложенные функции
* Области видимости
* Обращение к глобальным переменным из функций
* Статические переменные
* Передача аргументов в функции
* Разделение кода на несколько файлов (модульность)
* Включение одного файла в другой (include и require)
* Автозагрузка файлов с помощью Composer
* Особенности включения файлов в PHP
* В подключаемых файлах не должно быть выполняемого кода
* Стандартные встроенные функции и библиотеки
* Массивы (обычные и ассоциативные)
* Цикл foreach
* Требования к оформлению PHP-кода. Стандарты PSR
* Требования к выполнению л/р 3
* Самодокументируемый структурный код

### 3. Исполняемые файлы в Windows и Unix-подобных системах
Видео: https://youtu.be/yuSveRKLUzg

Описываются механизмы превращения файла с текстом программы в исполняемую утилиту, которую можно запустить в операционной системе Windows, MacOS или Linux.

Темы:
* Бинарные исполняемые файлы. Способы запуска исполняемых файлов в Windows.
* Другие типы файлов, которые можно запускать на выполнение.
* Командный интерпретатор cmd.exe. Выполнение команд в интерактивном режиме.
* Выполнение команд в пакетном режиме. Командные файлы (*.bat или *.cmd).
* Связь типа файла с его расширением (для Windows).
* Исполняемые файлы VBScript и JScript
* Механизм ассоциации расширения файла с открывающим его приложением. Команды assoc и ftype.
* Оболочка PowerShell.
* Windows Terminal
* Запуск Linux внутри Windows (подсистема WSL)
* Исполняемые файлы в Linux. Атрибуты файла.

---

## Основные лекции

### 1. Создание PHP-приложения с помощью Composer. Публикация в Packagist
* Практика свободно распространяемых компонентов. Публичные репозитории и системы контроля версий.
Повторное использование кода. Четкое разделение кода на свой и заимствованный. Упрощение переноса кода из дева в прод.
Две проблемы:
1. Хаотичные библиотеки, каша зависимостей. Все нужно откуда-то скачивать (вместе со своими зависимостями) и вручную подключать в приложение.
2. Разная структура приложений. Тяжело загружать зависимости в разных местах.

Решения этих проблем:
1. Менеджер для управления зависимостями.
2.  Задача организации кода, выбора структуры приложения.  Код должен быть стандартизирован (PSR, пространства имен, автозагрузка классов).

Пакетный менеджер Composer объединяет решения этих двух проблем:
1. Управляет (установка, обновление, удаление) зависимостями из централизованного репозитория, который связан с хранилищами публичных репозиториев.
2. Организует автозагрузку установленных модулей, нам не нужно отдельно загружать в проект каждый установленный пакет. Упрощает установку приложения целиком, со всеми зависимостями.

Packagist.org is the main Composer repository. A Composer repository is basically a package source: a place where you can get packages from. Packagist aims to be the central repository that everybody uses. This means that you can automatically require any package that is available there, without further specifying where Composer should look for the package.

If you go to the Packagist.org website, you can browse and search for packages.

Any open source project using Composer is recommended to publish their packages on Packagist. A library does not need to be on Packagist to be used by Composer, but it enables discovery and adoption by other developers more quickly.

Composer с 2011 года. Composer -- это скрипт на языке PHP.
* Установка Composer
* Конфигурация в composer.json. 
composer init

* Packagist -- централизованный репозиторий PHP-пакетов. Там ссылки на репозиторий в системе контроля версий и метаданные о пакете.
Версия -- это тег в системе контроля версий.

Установка зависимостей -- composer install
"Установить зависимость" означает скачать из определенного репозитория в папку проекта файлы с исходным кодом функций или классов.
Также создается файл vendor/autoload.php, который подключает все установленные зависимости

Если разворачиваем проект из GitHub: клонирование, установка зависимостей через `composer install`.
Из Packagist проект разворачивается проще, одной командой: `composer create-project`.

### 4. Консольные и браузерные приложения. Особенности JavaScript
Рассмотрена структура консольных приложений, выполняющихся в терминале, и приложений, выполняющихся внутри веб-браузера. Дан обзор некоторых возможностей и особенностей языка JavaScript для браузерных приложений: 
- Возможности скриптов JavaScript в браузере
- Особенности работы с переменными и функциями
- Работа с DOM и обработка событий для построения UI
- Два варианта работы с модулями в JavaScript

Презентации к лекции:
* Консольные и браузерные приложения: http://andpop.ru/files/lection/DBMS_Tech/02_Console_Browser.pdf
* Особенности языка JavaScript для браузерных приложений: http://andpop.ru/files/lection/DBMS_Tech/03_JS.pdf

Примеры кода: https://github.com/andpop/MRSU-examples/tree/main/db_tech

Содержание:
* Начало
* Одно приложение в разных средах исполнения.
* Задача покомпонентного перевода консольного приложения в браузер.
* Пользовательский интерфейс в консольных приложениях. 
* Терминология: терминал, консоль и командная оболочка.
* Терминал и консоль как отдельные устройства.
* Программная эмуляция терминала и консоли в персональном компьютере.
* Командная оболочка (bash, zsh, cmd, PowerShell).
* Возможности Windows Terminal.
* Структура консольного приложения.
* Структура браузерного приложения.
* Рендеринг веб-страницы
* Просмотр DOM и стилей в Инструментах разработчика в браузере
* Возможности скриптов JavaScript в браузере
* Основные особенности языка JavaScript
* Запуск простейшего скрипта "Hello, world!"
* Консоль для JavaScript
* EcmaScript и JavaScript. Версии стандарта EcmaScript
* Движки JavaScript. Проверка реализованных возможностей в движках на сайте https://caniuse.com
* Объявление переменных с помощью var, let и const. Всплытие переменных
* Функции в JavaScript. Function Declaration и Function Expression
* Анонимные функции
* Стрелочные функции
* Вложенные функции
* Лексическое окружение
* Замыкания
* Управление интерфейсом пользователя. Работа с DOM
* Обработка событий, происходящих в браузере
* Модульность в JavaScript
* Два варианта работы с модулями
* Сборка JavaScript-проекта


### 5. Обработка событий в JavaScript. База данных IndexedDB
Рассматриваются механизмы обработки браузерных событий в сценариях JavaScript (в том числе делегирование событий). Описываются возможности и особенности базы данных IndexedDB, с которой можно работать из JavaScript-кода внутри браузера.

Презентации к лекции:
* Обработка браузерных событий в JavaScript: https://andpop.ru/files/lection/DBMS_Tech/04_Events.pdf
* База данных IndexedDB: https://andpop.ru/files/lection/DBMS_Tech/05_IndexedDB.pdf

Примеры кода: https://github.com/andpop/MRSU-examples/tree/main/db_tech

Содержание:
* Начало
* Источники событий в браузере.
* Спецификации W3C и WHATWG для HTML, DOM, BOM, CSS.
* Обработчики событий как свойства DOM-элемента.
* Просмотр событий, на которые может  реагировать DOM-элемент, в инструментах разработчика в браузере.
* Варианты привязки обработчика события к DOM-элементу. 
* Передача в обработчик объекта event с информацией о произошедшем событии.
* Отмена для элемента поведения по умолчанию. Метод event.preventDefault().
* Погружение и всплытие событий.
* Делегирование обработки событий.
* Возможности базы данных IndexedDB.
* Структура Indexed DB.Хранилища объектов, данные и индексы
* Асинхронная работа с IndexedDB.
* Упрощение работы с IndexedDB с помощью библиотеки idb.

### 6. Frontend и backend. Веб-приложения на PHP
Обсждаем механизмы работы веб-приложений. Работаем с HTTP-протоколом через telnet. Рассматриваем frontend и backend части веб-приложений. Разбираем создание и запуск веб-приложения на PHP.

Презентация к лекции:  https://andpop.ru/files/lection/DBMS/09_Web.pdf

Код: https://github.com/andpop/MRSU-examples/tree/main/db/06_Web

Темы:
* Начало
* Две части веб-приложения. Frontend и backend.
* Связь клиента и сервера, протокол HTTP.
* Работа с HTTP-запросами с помощью telnet.
* Виртуальные хосты в протоколе HTTP 1.1.
* Свойства протокола HTTP. Заголовки и тела запросов.
* HTTP-методы и их связь с операциями CRUD. 
* Коды HTTP-ответов.
* Передача данных в HTTP-запросе на сервер. Query string и тело запроса.
* Инструменты для работы с HTTP-запросами.
* Схема работы frontend-части веб-приложения. Структура URL.
* Загрузка и рендеринг документа в браузере.
* Возможности JavaScript в браузере.
* Структура backend. Инфраструктура для запуска приложений на сервере и динамического формирования HTML-страниц для клиентов.
* Простые веб-приложения на PHP.
* Запуск встроенного веб-сервера в PHP.
* Первое приложение (Hello world) на PHP.
* PHP как шаблонизатор.
* Структура backend-приложения в режиме CGI.
* Сравнение консольных и веб-приложений на PHP.
* Поддержка HTTP в PHP. Массивы $_SERVER, $_GET, $_POST.
* Альтернативный синтаксис PHP.
* Два пути написания PHP-приложения. Модели Page Controller и Front Controller.

### 7. Веб-приложения на PHP. Часть 2
Повторяем механизмы работы веб-приложений. Рассматриваем способы обращения к серверу из браузера с помощью тегов HTML и функций JavaScript. Обрабатываем данные из HTML-форм.

Код: https://github.com/andpop/MRSU-examples/tree/main/db/06_Web

Темы:
* Запуск встроенного в PHP веб-сервера.
* HTTP-запросы для получения файлов различных MIME-типов.
* Обращение из браузера к PHP-файлу.
* Можно ли увидеть исходный код PHP-скрипта в браузере?
* Работа с PHP в режиме Page Controller. Запуск скрипта при получении GET-запроса  к нему.
* Передача параметров от веб-сервера скрипту. Массив $_SERVER.
* Доступ к файловой системе сервера из скрипта и из браузера.
* Выделение общедоступных файлов в каталог public. Указание директории при запуске сервера.
* Доступ из скрипта к query string. Массив $_GET.
* Работа с PHP в режиме Front Controller. Запуск одного скрипта для всех запросов.
* Обращение к несуществующим ресурсам. Генерация ответа скриптом.
* Запуск PHP-скриптов из HTML-страниц с помощью тега a.
* Отправка на сервер данных из веб-форм. Метод POST, данные из формы в теле запроса.
* Доступ к данным из формы через массив $_POST.
* Асинхронная отправка запросов на сервер из JavaScript. Метод fetch().
* Отправка POST-запроса с помощью fetch().
