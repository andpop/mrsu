**********************
PowerShell transcript start
Start time: 20251120075000
**********************
Transcript started, output file is log.txt
304_DB_Afonkin_DE
304_DB_Aksenov_RM
304_DB_Artemev_DA
304_DB_Dolya_OA
304_DB_Geraskin_RG
304_DB_Isakov_VV
304_DB_Kiselev_NS
304_DB_Kizhaev_RP
304_DB_Kochetov_VA
304_DB_Kurmakaev_RA
304_DB_Kuvakin_RA
304_DB_Lukovataya_KV
304_DB_Migachev_IP
304_DB_Moiseev_OM
304_DB_Nepyanova_AP
304_DB_Pazuhina_AK
=====================================================
/home/andrey/labs/DB/304_DB_Pazuhina_AK
Из github.com-mrsu:andpop-mrsu/304_DB_Pazuhina_AK
Из github.com-mrsu:andpop-mrsu/304_DB_Pazuhina_AK
 * branch            master     -> FETCH_HEAD
 * branch            master     -> FETCH_HEAD
Уже актуально.
error: внешний репозиторий student уже существует
error: внешний репозиторий student уже существует
Из https://github.com/Palasy/304_DB_Pazuhina_AK
Из https://github.com/Palasy/304_DB_Pazuhina_AK
 * [новая ветка]     Task06     -> student/Task06
 * [новая ветка]     Task06     -> student/Task06
Автослияние .gitignore
КОНФЛИКТ (добавление/добавление): Конфликт слияния в .gitignore
Сбой автоматического слияния; исправьте конфликты, затем зафиксируйте результат.
--------------------------------------------------
Task:  /home/andrey/labs/DB/304_DB_Pazuhina_AK/Task06
--------------------------------------------------
Check path: db_init.sql
--------------------------------------------------
Check path: ER.jpg
--------------------------------------------------
Check path: db_schema.jpg
db_schema.jpg not found
--------------------------------------------------
Total ok: 2
Total error: 1
--------------------------------------------------
/home/andrey/labs/DB/304_DB_Pazuhina_AK
Add Task06
Task from branch: Task06
Creation date: 11/14/2025 19:32:53
304_DB_Piganov_DM
304_DB_Savin_RV
304_DB_Sergeeva_OD
304_DB_Shagilov_KD
304_DB_Shevolaev_IV
304_DB_Sveshnikov_IK
304_DB_Tumajkina_DA
=====================================================
/home/andrey/labs/DB/304_DB_Tumajkina_DA
Из github.com-mrsu:andpop-mrsu/304_DB_Tumajkina_DA
Из github.com-mrsu:andpop-mrsu/304_DB_Tumajkina_DA
 * branch            master     -> FETCH_HEAD
 * branch            master     -> FETCH_HEAD
Уже актуально.
Из https://github.com/dtuma2005/304_DB_Tumajkina_DA
Из https://github.com/dtuma2005/304_DB_Tumajkina_DA
 * [новая ветка]     Task01     -> student/Task01
 * [новая ветка]     Task01     -> student/Task01
 * [новая ветка]     Task02     -> student/Task02
 * [новая ветка]     Task02     -> student/Task02
 * [новая ветка]     Task03     -> student/Task03
 * [новая ветка]     Task03     -> student/Task03
 * [новая ветка]     Task04     -> student/Task04
 * [новая ветка]     Task04     -> student/Task04
 * [новая ветка]     Task05     -> student/Task05
 * [новая ветка]     Task05     -> student/Task05
 * [новая ветка]     master     -> student/master
 * [новая ветка]     master     -> student/master
Обновление 2093543..784b4e7
Fast-forward (no commit created; -m option ignored)
 Task05/data_add.sql  |    63 +
 Task05/db_init.sql   | 33178 +++++++++++++++++++++++++++++++++++++++++++++++++
 Task05/db_schema.jpg |   Bin 0 -> 527630 bytes
 3 files changed, 33241 insertions(+)
 create mode 100644 Task05/data_add.sql
 create mode 100644 Task05/db_init.sql
 create mode 100644 Task05/db_schema.jpg
--------------------------------------------------
Task:  /home/andrey/labs/DB/304_DB_Tumajkina_DA/Task05
--------------------------------------------------
Check path: db_init.sql
--------------------------------------------------
Check path: data_add.sql
INSERT OR IGNORE INTO users (name, email, gender, register_date, occupation_id)
VALUES
('Сергеева Ольга Денисовна', 'sergeevan@gmail.com', 'female', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1)),
('Тараканова Вероника Юрьевна', 'tarakanova@gmail.com', 'female', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1)),
 ('Тумайкина Дарья Александровна', 'tumaykina@gmail.com', 'female', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1)),
('Шагилов Кирилл Дмитриевич', 'shagilov@gmail.com', 'male', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1)),
('Шеволаев Илья Вячеславович', 'Shevolaev@gmail.com', 'male', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1));



INSERT OR IGNORE INTO movies (title, year)
VALUES
('Бегущий по лезвию 2049 (2017)', 2017),
('Форма голоса (2016)', 2016),
('Милые кости (2009)', 2009);

INSERT OR IGNORE INTO genres (name) VALUES ('Thriller');
INSERT OR IGNORE INTO genres (name) VALUES ('Sci-Fi');
INSERT OR IGNORE INTO genres (name) VALUES ('Action');
INSERT OR IGNORE INTO genres (name) VALUES ('Anime');
INSERT OR IGNORE INTO genres (name) VALUES ('Drama');

INSERT OR IGNORE INTO movie_genres (movie_id, genre_id)
SELECT m.id, g.id FROM movies m JOIN genres g ON g.name = 'Sci-Fi'
WHERE m.title = 'Бегущий по лезвию 2049 (2017)';

INSERT OR IGNORE INTO movie_genres (movie_id, genre_id)
SELECT m.id, g.id FROM movies m JOIN genres g ON g.name = 'Anime'
WHERE m.title = 'Форма голоса (2016)';

INSERT OR IGNORE INTO movie_genres (movie_id, genre_id)
SELECT m.id, g.id FROM movies m JOIN genres g ON g.name = 'Drama'
WHERE m.title = 'Милые кости (2009)';


INSERT INTO ratings (user_id, movie_id, rating, timestamp)
SELECT u.id, m.id, 4.8, strftime('%s','now')
FROM users u JOIN movies m ON m.title = 'Бегущий по лезвию 2049 (2017)'
WHERE u.email = 'tumaykina@gmail.com'
AND NOT EXISTS (
    SELECT 1 FROM ratings r WHERE r.user_id = u.id AND r.movie_id = m.id
);

INSERT INTO ratings (user_id, movie_id, rating, timestamp)
SELECT u.id, m.id, 5.0, strftime('%s','now')
FROM users u JOIN movies m ON m.title = 'Форма голоса (2016)'
WHERE u.email = 'tumaykina@gmail.com'
AND NOT EXISTS (
    SELECT 1 FROM ratings r WHERE r.user_id = u.id AND r.movie_id = m.id
);

INSERT INTO ratings (user_id, movie_id, rating, timestamp)
SELECT u.id, m.id, 4.9, strftime('%s','now')
FROM users u JOIN movies m ON m.title = 'Милые кости (2009)'
WHERE u.email = 'tumaykina@gmail.com'
AND NOT EXISTS (
    SELECT 1 FROM ratings r WHERE r.user_id = u.id AND r.movie_id = m.id
);
--------------------------------------------------
Check path: db_schema.jpg
--------------------------------------------------
Run: sqlite3 test.db .read db_init.sql

--------------------------------------------------
Run: sqlite3 test.db select count(*) from users
943
--------------------------------------------------
Total ok: 5
Total error: 0
--------------------------------------------------
/home/andrey/labs/DB/304_DB_Tumajkina_DA
Task05
Task from branch: Task05
Creation date: 11/14/2025 19:18:50
To github.com-mrsu:andpop-mrsu/304_DB_Tumajkina_DA.git
To github.com-mrsu:andpop-mrsu/304_DB_Tumajkina_DA.git
   2093543..784b4e7  master -> master
   2093543..784b4e7  master -> master
304_DB_Yambaev_KN
=====================================================
/home/andrey/labs/DB/304_DB_Yambaev_KN
Из github.com-mrsu:andpop-mrsu/304_DB_Yambaev_KN
Из github.com-mrsu:andpop-mrsu/304_DB_Yambaev_KN
 * branch            master     -> FETCH_HEAD
 * branch            master     -> FETCH_HEAD
Уже актуально.
Из https://github.com/Kostrakoff/304_DB_Yambaev_KN
Из https://github.com/Kostrakoff/304_DB_Yambaev_KN
 * [новая ветка]     Task05     -> student/Task05
 * [новая ветка]     Task05     -> student/Task05
 * [новая ветка]     master     -> student/master
 * [новая ветка]     master     -> student/master
Обновление 55e9a25..5ad7335
Fast-forward (no commit created; -m option ignored)
 Task05/data_add.sql  |    60 +
 Task05/db_init.sql   | 33192 +++++++++++++++++++++++++++++++++++++++++++++++++
 Task05/db_schema.jpg |   Bin 0 -> 40738 bytes
 3 files changed, 33252 insertions(+)
 create mode 100644 Task05/data_add.sql
 create mode 100644 Task05/db_init.sql
 create mode 100644 Task05/db_schema.jpg
--------------------------------------------------
Task:  /home/andrey/labs/DB/304_DB_Yambaev_KN/Task05
--------------------------------------------------
Check path: db_init.sql
--------------------------------------------------
Check path: data_add.sql
INSERT OR IGNORE INTO users (name, email, gender, register_date, occupation_id)
VALUES
('Ястребцев Денис Николаевич', 'yastreb@gmail.com', 'male', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1)),
('Шеволаев Илья Вячеславович', 'shevolaev@gmail.com', 'male', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1)),
('Шагилов Кирилл Дмитриевич', 'shagil4@gmail.com', 'male', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1)),
('Ямбаев Константин Николаевич', 'yambalalay@gmail.com', 'male', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1)),
('Тумайкина Дарья Александровна', 'tymuch@gmail.com', 'female', date('now'),
 (SELECT id FROM occupations ORDER BY id LIMIT 1));

INSERT OR IGNORE INTO movies (title, year)
VALUES
('Джентльмены (2019)', 2019),
('Криминальное чтиво (1994)', 1994),
('Темный рыцарь (2008)', 2008);

INSERT OR IGNORE INTO genres (name) VALUES ('Sci-Fi');
INSERT OR IGNORE INTO genres (name) VALUES ('Action');
INSERT OR IGNORE INTO genres (name) VALUES ('Crime');
INSERT OR IGNORE INTO genres (name) VALUES ('Thriller');
INSERT OR IGNORE INTO genres (name) VALUES ('Drama');

INSERT OR IGNORE INTO movie_genres (movie_id, genre_id)
SELECT m.id, g.id FROM movies m JOIN genres g ON g.name = 'Crime'
WHERE m.title = 'Джентльмены (2019)';

INSERT OR IGNORE INTO movie_genres (movie_id, genre_id)
SELECT m.id, g.id FROM movies m JOIN genres g ON g.name = 'Drama'
WHERE m.title = 'Криминальное чтиво (1994)';

INSERT OR IGNORE INTO movie_genres (movie_id, genre_id)
SELECT m.id, g.id FROM movies m JOIN genres g ON g.name = 'Action'
WHERE m.title = 'Темный рыцарь (2008)';

INSERT INTO ratings (user_id, movie_id, rating, timestamp)
SELECT u.id, m.id, 4.8, strftime('%s','now')
FROM users u JOIN movies m ON m.title = 'Джентльмены (2019)'
WHERE u.email = 'shagil4@gmail.com'
AND NOT EXISTS (
    SELECT 1 FROM ratings r WHERE r.user_id = u.id AND r.movie_id = m.id
);

INSERT INTO ratings (user_id, movie_id, rating, timestamp)
SELECT u.id, m.id, 5.0, strftime('%s','now')
FROM users u JOIN movies m ON m.title = 'Криминальное чтиво (1994)'
WHERE u.email = 'shagil4@gmail.com'
AND NOT EXISTS (
    SELECT 1 FROM ratings r WHERE r.user_id = u.id AND r.movie_id = m.id
);

INSERT INTO ratings (user_id, movie_id, rating, timestamp)
SELECT u.id, m.id, 4.9, strftime('%s','now')
FROM users u JOIN movies m ON m.title = 'Темный рыцарь (2008)'
WHERE u.email = 'shagil4@gmail.com'
AND NOT EXISTS (
    SELECT 1 FROM ratings r WHERE r.user_id = u.id AND r.movie_id = m.id
);
--------------------------------------------------
Check path: db_schema.jpg
--------------------------------------------------
Run: sqlite3 test.db .read db_init.sql

--------------------------------------------------
Run: sqlite3 test.db select count(*) from users
943
--------------------------------------------------
Total ok: 5
Total error: 0
--------------------------------------------------
/home/andrey/labs/DB/304_DB_Yambaev_KN
Выполнение Лабораторной Работы №5
Task from branch: Task05
Creation date: 11/14/2025 19:04:02
To github.com-mrsu:andpop-mrsu/304_DB_Yambaev_KN.git
To github.com-mrsu:andpop-mrsu/304_DB_Yambaev_KN.git
   55e9a25..5ad7335  master -> master
   55e9a25..5ad7335  master -> master
304_DB_Yastrebcev_DN
304_DB_Zabnenkov_MA
**********************
PowerShell transcript end
End time: 20251120080711
**********************
